<!DOCTYPE html>
<html>

<%= erb :_head, locals: { copy: @copy } %>

<body>
    <div id="wrapper">
        <div id="page">
            <div class="column">
                <input id="username" class="mb" placeholder="Username...">
                <input id="password" class="mb" placeholder="Password..." type="password">
                <div class="buttons">
                    <button onclick="submitAttempt()">Submit</button>
                    <button onclick="window.location ='/help'">Help</button>
                    <button onclick="window.location ='/about'">About</button>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    document.getElementById('password').onkeypress = (event) => {
        if (event.key === 'Enter') submitAttempt()
    }

    var submitAttempt = () => {
        const username = document.getElementById('username').value
        const password = document.getElementById('password').value
        fetch('/login', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'}, 
            body: JSON.stringify({
                username: username,
                password: password,
            })
        }).then(res => {
            if (res.status == 200) {
                document.location.href = '/'
            } else {
                window.location.reload()
            }
        })
    }
</script>

</html>
